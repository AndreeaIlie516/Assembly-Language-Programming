;far - same file

EXTRN DISPL:FAR
MYSTACK SEGMENT STACK 'stack'
 DB 4096 DUP (?) 
MYSTACK ENDS
DAT SEGMENT PARA PUBLIC 'DATA'
STRING DW 4,7,13,2
LENGHT DW ($-STRING)/2
DAT ENDS

COD1 SEGMENT PARA PUBLIC 'CODE'
MAIN PROC FAR
ASSUME CS:COD1, DS:DAT, ES:DAT, SS:MYSTACK
PUSH DS
XOR AX,AX
PUSH AX
MOV AX,DAT
MOV DS,AX
MOV AX,0

LEA BX, STRING
MOV CX, LENGHT
CALL FAR PTR SUM
PUSH AX
CALL DISPL
MOV AX,4C00H
INT 21H
RET
MAIN ENDP
COD1 ENDS

COD2 SEGMENT PARA PUBLIC 'CODE'
PUBLIC SUM
ASSUME CS:COD2
SUM PROC FAR
MOV SI,0
SUM_LOOP:
ADD AX,[BX+SI]
ADD SI,2
LOOP SUM_LOOP
RETF
SUM ENDP
COD2 ENDS
END MAIN